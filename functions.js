function rand(...e){let[t,n=0]=e.reverse();return Math.floor(Math.random()*(t+1-n)+n)}function createNodeElement(e){let t=document.createElement("div");t.innerHTML=e;let n=t.children[0]??"";if(t.innerHTML="","TEMPLATE"==n.tagName){let r=document.createDocumentFragment();return r.append(...n.content.children),r}return n}function createObjectElement(e,t,n=!1){return Array.from(e).reduce((e,r)=>(e[r.getAttribute(t)]=r,n&&r.removeAttribute(t),e),{})}function createNodeFragment(...e){let t=document.createDocumentFragment();return e.forEach(e=>{"function"==typeof e?t.append(e()):t.append(e)}),t}function replaceNodeChildren(e,t={}){let n=e=>e instanceof Text||e instanceof String||e instanceof HTMLElement||e instanceof DocumentFragment||"string"==typeof render;return n(e)&&e.querySelectorAll("[replace-node-children], [data-node-children]").forEach(e=>{let r=t[e.getAttribute("replace-node-children")]||t[e.getAttribute("data-node-children")];n(r)?(e.removeAttribute("replace-node-children"),e.removeAttribute("data-node-children"),e.replaceWith(r),Array.from(e.attributes).forEach(e=>{r.setAttribute(e.name,`${r.getAttribute(e.name)||""} ${e.value}`.trim())})):e.remove()}),e}function copyToClipboard(e=""){if(navigator.clipboard)navigator.clipboard.writeText(e);else{let t=document.createElement("textarea");t.setAttribute("style","position: fixed; top: 0; left: 0; transform: translate(-100%);"),t.value=e,document.body.append(t),t.select(),document.execCommand("copy"),t.remove()}}function trimString(e=""){let t=(t="")=>{if(""!=t)for(;e.startsWith(t);)e=e.slice(1);return e},n=(t="")=>{if(""!=t)for(;e.endsWith(t);)e=e.slice(0,-1);return e},r=(t="")=>{if(""!=t){for(;e.startsWith(t);)e=e.slice(1);for(;e.endsWith(t);)e=e.slice(0,-1)}return e};return{left:t,right:n,both:r}}function encodeInput(e=""){if(""!=e.trim()){let t=document.createElement("input");return t.setAttribute("value",e),t.outerHTML.slice(14,-2)}return e}function encodeTextarea(e=""){if(""!=e.trim()){let t=document.createElement("textarea");return t.innerHTML=e,t.innerHTML}return e}function defineVal(e){let t={},n=new CustomEvent("_value"),r=document.createTextNode(""),i=[],a=e=>{let n=()=>e(t.value),a=()=>r.removeEventListener("_value",n);return n(),r.addEventListener("_value",n),i.push(a),()=>a()},o=()=>{i.forEach(e=>e())};return Object.defineProperty(t,"_value",{value:e,writable:!0,enumerable:!1,configurable:!1}),Object.defineProperty(t,"value",{get:function(){return this._value},set:function(e){this._value!==e&&(this._value=e,r.dispatchEvent(n))}}),Object.defineProperty(t,"observe",{value:a,writable:!1,enumerable:!1,configurable:!1}),Object.defineProperty(t,"unobserve",{value:o,writable:!1,enumerable:!1,configurable:!1}),Object.seal(t),t}function invertSign(e){return("string"==typeof e||"number"==typeof e)&&((e=parseInt(e))>0||e<0)?-e:0}function genereteCode(e=7){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n=t.toLocaleLowerCase(),r=[t,n,"1234567890"].join("");return Array(e).fill(null).map(()=>r[rand(r.length-1)]).join("")}function resizeImage(e,t,n,r){let i=new Image;i.crossOrigin="Anonymous",i.src=e,i.onload=()=>{let e=document.createElement("canvas"),a=e.getContext("2d");e.width=t,e.height=n;let o=i.width/i.height,l=t/n,u,c,d,s;o>l?(u=i.height*l,c=i.height,d=(i.width-u)/2,s=0):(u=i.width,c=i.width/l,d=0,s=(i.height-c)/2),a.drawImage(i,d,s,u,c,0,0,t,n);let h=e.toDataURL("image/png");r(h)},i.onerror=()=>{console.error("Error al cargar la imagen.")}}async function resizeCanvasImage(e,t){return new Promise((n,r)=>{if(!Array.isArray(t))return r({status:!1,images:[]});let i=new Image;i.crossOrigin="Anonymous",i.src=e,i.addEventListener("load",()=>{let e=t.map(e=>{let t=document.createElement("canvas"),n=t.getContext("2d"),r=e.both??e.width,a=e.both??e.height;t.width=r,t.height=a;let o=i.width/i.height,l=r/a,u,c,d,s;return o>l?(u=i.height*l,c=i.height,d=(i.width-u)/2,s=0):(u=i.width,c=i.width/l,d=0,s=(i.height-c)/2),n.drawImage(i,d,s,u,c,0,0,r,a),{width:r,height:a,url:e=>t.toDataURL(e||"image/png"),canvas:t}});n({status:!0,images:e})}),i.addEventListener("error",()=>{r({status:!1,images:[]})})})}function convertSecondsToTime(e){return{hours:Math.floor((e=parseInt(e))/3600),minutes:Math.floor(e%3600/60),seconds:e%60}}function getPercentage(e,t){return Math.floor(parseInt(e)/parseInt(t)*100)}function storageJSON(e,t,n){try{e.setItem(t,JSON.stringify(n(JSON.parse(e.getItem(t)??"null"))))}catch(r){console.log(r)}}function isObjectValue(e,t){e={...e};let n=t.split(".");return!n.some(t=>void 0===(e=e[t]))}function objectValue(e,t,n){e={...e};let r=t.split(".");return r.some(t=>void 0===(e=e[t]))?n:e}function findInt(e,t=1/0){if("string"==typeof e){e=t===1/0?e:e.slice(0,t);let n=parseInt(e.split("").filter(e=>!isNaN(parseInt(e))).join(""));return isNaN(n)?"":n}return""}function normalizeString(e){let t={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",Ā:"A",Ă:"A",Ą:"A",Ǎ:"A",Ǻ:"A",Ȁ:"A",Ȃ:"A",Ḁ:"A",Ạ:"A",Ả:"A",Ấ:"A",Ầ:"A",Ẩ:"A",Ẫ:"A",Ậ:"A",Ắ:"A",Ằ:"A",Ẳ:"A",Ẵ:"A",Ặ:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",ā:"a",ă:"a",ą:"a",ǎ:"a",ǻ:"a",ȁ:"a",ȃ:"a",ḁ:"a",ạ:"a",ả:"a",ấ:"a",ầ:"a",ẩ:"a",ẫ:"a",ậ:"a",ắ:"a",ằ:"a",ẳ:"a",ẵ:"a",ặ:"a",È:"E",É:"E",Ê:"E",Ë:"E",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ḕ:"E",Ḗ:"E",Ẹ:"E",Ẻ:"E",Ẽ:"E",Ế:"E",Ề:"E",Ể:"E",Ễ:"E",Ệ:"E",è:"e",é:"e",ê:"e",ë:"e",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",ȅ:"e",ȇ:"e",ḕ:"e",ḗ:"e",ẹ:"e",ẻ:"e",ẽ:"e",ế:"e",ề:"e",ể:"e",ễ:"e",ệ:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ḭ:"I",Ḯ:"I",Ỉ:"I",Ị:"I",ì:"i",í:"i",î:"i",ï:"i",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",ǐ:"i",ȉ:"i",ȋ:"i",ḭ:"i",ḯ:"i",ỉ:"i",ị:"i",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",Ō:"O",Ŏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ȫ:"O",Ȭ:"O",Ȯ:"O",Ȱ:"O",Ọ:"O",Ỏ:"O",Ố:"O",Ồ:"O",Ổ:"O",Ỗ:"O",Ộ:"O",Ớ:"O",Ờ:"O",Ở:"O",Ỡ:"O",Ợ:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",ō:"o",ŏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ȫ:"o",ȭ:"o",ȯ:"o",ȱ:"o",ọ:"o",ỏ:"o",ố:"o",ồ:"o",ổ:"o",ỗ:"o",ộ:"o",ớ:"o",ờ:"o",ở:"o",ỡ:"o",ợ:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",Ǔ:"U",Ǖ:"U",Ǘ:"U",Ǚ:"U",Ǜ:"U",Ȕ:"U",Ȗ:"U",Ṳ:"U",Ṵ:"U",Ṷ:"U",Ụ:"U",Ủ:"U",Ứ:"U",Ừ:"U",Ử:"U",Ữ:"U",Ự:"U",ù:"u",ú:"u",û:"u",ü:"u",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",ǔ:"u",ǖ:"u",ǘ:"u",ǚ:"u",ǜ:"u",ȕ:"u",ȗ:"u",ṳ:"u",ṵ:"u",ṷ:"u",ụ:"u",ủ:"u",ứ:"u",ừ:"u",ử:"u",ữ:"u",ự:"u",ñ:"n"};return e.split("").map(e=>t[e]||e).join("")}function styleElement(e,t){return Object.keys(t??{}).forEach(n=>e.style[n]=t[n]),e}async function getLIP(){try{let e=new RTCPeerConnection({iceServers:[]});e.createDataChannel("ipChannel");let t=new Promise(t=>{e.onicecandidate=e=>{if(e.candidate){if(e.candidate.address)t(e.candidate.address);else{let n=/(?:\d{1,3}\.){3}\d{1,3}/.exec(e.candidate.candidate);n&&t(n[0])}}}});e.createOffer().then(t=>e.setLocalDescription(t));let n=await t;return n}catch(r){return console.error("Error al obtener la IP local:",r),null}}function downloadFile(e,t=""){let n=document.createElement("a");n.style.display="none",n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n)}function calculateAspectRatio(e,t){let{width:n,height:r}=e,{width:i,height:a}=t;return i&&a||i?{width:i,height:r*(i/n)}:a?{width:n*(a/r),height:a}:{width:n,height:r}}function socketIO(e,t="socketIO",n=[]){if(window.io){let r=io(e);return Array.from(n).forEach(e=>{r.on(e,n=>{window.dispatchEvent(new CustomEvent(t,{detail:{from:e,data:n}}))})}),r}return null}function encodeQueryObject(e){return e instanceof Object?Array.from([e]).flat().map(e=>Object.entries(e).map(e=>[encodeURIComponent(e[0]),encodeURIComponent(e[1]),].join("=")).join("&")).join("&"):""}const findElementWithRetry=async(e,t=100)=>new Promise((n,r)=>{let i=0,a=setInterval(()=>{let r=document.querySelector(e);(r||++i>t)&&(clearInterval(a),n(r))})});function isURL(e){try{return new URL(e),!0}catch(t){return!1}}function addLeadingZeros(e,t=5){return e.toString().padStart(t,"0")}function storageObject(e,t,n=!0){Object.entries(t).forEach(t=>{!n&&e.getItem(t[0])||e.setItem(t[0],t[1])})}function getBase64Size(e){let t=e.replace(/^data:[a-z]+\/[a-z]+;base64,/,""),n=t.length,r=3*n/4-(t.endsWith("==")?2:t.endsWith("=")?1:0);return r}function imageUrlToCanvas(e){return new Promise((t,n)=>{let r=new Image;r.crossOrigin="Anonymous",r.onload=()=>{let e=document.createElement("canvas");e.width=r.width,e.height=r.height;let n=e.getContext("2d");n.drawImage(r,0,0),t(e)},r.onerror=e=>{n(Error("Failed to load image: "+e.message))},r.src=e})}function JSONparse(e){try{return JSON.parse(e)}catch(t){return e}}function getFileNameWithoutExtension(e){let t=e.split("/").pop(),n=t.split(".");return n.length>1&&n.pop(),n.join(".")}function toggleOptions(e="",t=[]){let n=t.findIndex(t=>t==e);return t[n+1]||t[0]}function fetchWebElement(e){return new Promise((t,n)=>{fetch(e).then(e=>e.text()).then(e=>{let n=document.createElement("div");n.innerHTML=e,t(n)}).catch(n)})}
