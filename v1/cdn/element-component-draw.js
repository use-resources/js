window.elementComponentDraw=function(a){let t={values:{canvas:{array:[],focus:null},painting:!1,paintingReady:!0,rect:null},elements:{canvas:document.createElement("canvas")},functions:{declareVar:(a,t={})=>a?.(t)??""}},e=createNodeElement(t.functions.declareVar(a=>`<div class="div_j46nnVSnu8tuV8" style="background:${a.background}"><div class="div_ak1IaKv"><div id="canvasBox" class="div_HPp5z9l" style="cursor: crosshair;"><canvas id="img-canvas" style="object-fit:contain"></canvas><canvas id="canvas"></canvas></div></div><div id="container-controls" class="div_Aqa0wxW"><div id="container-controls-bar" class="div_rmjk5xfg86dvogr3jvwy"><div class="div_ykgovoznvjn8f9uocd2q div_en26u61vg0k3ebqqc9f1"><label class="label_tYO6nSf label_rd4e5h0gakv26fgdsngm"><input id="color" type="color" value="${a.inputValue}"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" data-svg-name="fi fi-rr-fill"><path d="m22.327 18.422c.728 1.034 1.673 2.229 1.673 3.078a2.5 2.5 0 0 1 -5 0c0-.775.961-2.008 1.692-3.069a1 1 0 0 1 1.635-.009zm-.877-4.558-8.672 8.672a5.006 5.006 0 0 1 -7.071 0l-4.242-4.243a5 5 0 0 1 0-7.071l5.709-5.71-2.856-2.89a1 1 0 0 1 1.422-1.406l2.848 2.884 1.548-1.55-.843-.843a1 1 0 0 1 1.414-1.414l13 13a1 1 0 1 1 -1.414 1.414zm-1.414-1.414-8.486-8.486-1.557 1.558 4.718 4.778a1 1 0 1 1 -1.422 1.4l-4.709-4.765-5.7 5.7a3 3 0 0 0 0 4.243l4.242 4.243a3.005 3.005 0 0 0 4.243 0z"></path></svg></label><select id="range" class="select_Z1abqn2">${a.selectInnerHtml}</select><button id="button-toggle-bar" class="label_tYO6nSf"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-svg-name="fi fi-rr-angle-small-down"><path d="M18.71,8.21a1,1,0,0,0-1.42,0l-4.58,4.58a1,1,0,0,1-1.42,0L6.71,8.21a1,1,0,0,0-1.42,0,1,1,0,0,0,0,1.41l4.59,4.59a3,3,0,0,0,4.24,0l4.59-4.59A1,1,0,0,0,18.71,8.21Z"></path></svg></button></div><div class="div_ykgovoznvjn8f9uocd2q"><div class="div_KNf6yZy" style="pointer-events:initial;"><button id="undoButton" class="label_tYO6nSf" style="display:none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-svg-name="fi fi-rr-undo"><path d="M23,24a1,1,0,0,1-1-1,6.006,6.006,0,0,0-6-6H10.17v1.586A2,2,0,0,1,6.756,20L.877,14.121a3,3,0,0,1,0-4.242L6.756,4A2,2,0,0,1,10.17,5.414V7H15a9.01,9.01,0,0,1,9,9v7A1,1,0,0,1,23,24ZM8.17,5.414,2.291,11.293a1,1,0,0,0,0,1.414L8.17,18.586V16a1,1,0,0,1,1-1H16a7.984,7.984,0,0,1,6,2.714V16a7.008,7.008,0,0,0-7-7H9.17a1,1,0,0,1-1-1Z"></path></svg></button><button id="nextButton" class="label_tYO6nSf" style="display:none"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-svg-name="fi fi-rr-redo"><path d="M0,23V16A9.01,9.01,0,0,1,9,7h4.83V5.414A2,2,0,0,1,17.244,4l5.88,5.879a3,3,0,0,1,0,4.242L17.244,20a2,2,0,0,1-3.414-1.414V17H8a6.006,6.006,0,0,0-6,6,1,1,0,0,1-2,0ZM15.83,8a1,1,0,0,1-1,1H9a7.008,7.008,0,0,0-7,7v1.714A7.984,7.984,0,0,1,8,15h6.83a1,1,0,0,1,1,1v2.586l5.879-5.879a1,1,0,0,0,0-1.414L15.83,5.414Z"></path></svg></button><select id="select-number" class="select_02coxcfxh1g7zj4uma0"><option>0/0</option></select><hr class="hr_ZMZWNsx"><button id="button-capas" class="label_tYO6nSf"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-svg-name="fi fi-rr-layers"><path d="M22.485,10.975,12,17.267,1.515,10.975A1,1,0,1,0,.486,12.69l11,6.6a1,1,0,0,0,1.03,0l11-6.6a1,1,0,1,0-1.029-1.715Z"></path><path d="M22.485,15.543,12,21.834,1.515,15.543A1,1,0,1,0,.486,17.258l11,6.6a1,1,0,0,0,1.03,0l11-6.6a1,1,0,1,0-1.029-1.715Z"></path><path d="M12,14.773a2.976,2.976,0,0,1-1.531-.425L.485,8.357a1,1,0,0,1,0-1.714L10.469.652a2.973,2.973,0,0,1,3.062,0l9.984,5.991a1,1,0,0,1,0,1.714l-9.984,5.991A2.976,2.976,0,0,1,12,14.773ZM2.944,7.5,11.5,12.633a.974.974,0,0,0,1,0L21.056,7.5,12.5,2.367a.974.974,0,0,0-1,0h0Z"></path></svg></button></div></div></div></div><div id="div-window-capas" class="div_iu0mg3dwkwmbyoj7291" popover=""><div class="div_U6lIo74rWt4J6POwaZVg" style="pointer-events: none;"><div class="div_8oil7437wu5pwrsop25" style="pointer-events: initial;"><div class="div_glbsedpokowmimbmbd6j"><button data-hide-window=""><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-svg-name="fi fi-rr-angle-small-left"><path d="M10.6,12.71a1,1,0,0,1,0-1.42l4.59-4.58a1,1,0,0,0,0-1.42,1,1,0,0,0-1.41,0L9.19,9.88a3,3,0,0,0,0,4.24l4.59,4.59a1,1,0,0,0,.7.29,1,1,0,0,0,.71-.29,1,1,0,0,0,0-1.42Z"></path></svg></button><h3>Capas</h3><div id="div-button-capas" style="margin-left:auto; display:flex; gap:10px; display:none"><button id="button-download" class="label_tYO6nSf"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-svg-name="fi fi-rr-download"><path d="M9.878,18.122a3,3,0,0,0,4.244,0l3.211-3.211A1,1,0,0,0,15.919,13.5l-2.926,2.927L13,1a1,1,0,0,0-1-1h0a1,1,0,0,0-1,1l-.009,15.408L8.081,13.5a1,1,0,0,0-1.414,1.415Z"></path><path d="M23,16h0a1,1,0,0,0-1,1v4a1,1,0,0,1-1,1H3a1,1,0,0,1-1-1V17a1,1,0,0,0-1-1H1a1,1,0,0,0-1,1v4a3,3,0,0,0,3,3H21a3,3,0,0,0,3-3V17A1,1,0,0,0,23,16Z"></path></svg></button><button id="clearButton" class="label_tYO6nSf"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-svg-name="fi fi-rr-trash"><path d="M21,4H17.9A5.009,5.009,0,0,0,13,0H11A5.009,5.009,0,0,0,6.1,4H3A1,1,0,0,0,3,6H4V19a5.006,5.006,0,0,0,5,5h6a5.006,5.006,0,0,0,5-5V6h1a1,1,0,0,0,0-2ZM11,2h2a3.006,3.006,0,0,1,2.829,2H8.171A3.006,3.006,0,0,1,11,2Zm7,17a3,3,0,0,1-3,3H9a3,3,0,0,1-3-3V6H18Z"></path><path d="M10,18a1,1,0,0,0,1-1V11a1,1,0,0,0-2,0v6A1,1,0,0,0,10,18Z"></path><path d="M14,18a1,1,0,0,0,1-1V11a1,1,0,0,0-2,0v6A1,1,0,0,0,14,18Z"></path></svg></button></div></div><div id="div-list-capas" class="div_cou1gd2qeaa0xl1s90"></div></div></div></div></div>`,{background:a?.style?.background,inputValue:a?.style?.color??"#ffffff",selectInnerHtml:Array(500).fill(null).map((a,t)=>`
              <option value="${t+1}" ${2==t?"selected":""}>
                ${t+1} px
              </option>
            `).join("")})),n=createObjectElement(e.querySelectorAll("[id]"),"id",!0),$=n.canvas.getContext("2d");return t.functions.replaceTextObject=(a,t)=>(Object.entries(t).forEach(t=>{a=a.replace(...t)}),a),t.functions.copyCanvas=a=>{let t=document.createElement("canvas");t.width=a.width,t.height=a.height;let e=t.getContext("2d");return e.drawImage(a,0,0),t},t.functions.rewriteCanvas=(a,t,e=[])=>(a.width=t.width,a.height=t.height,e.forEach(t=>{if(t){let e=a.getContext("2d");e.drawImage(t,0,0)}}),a),t.functions.resizeCanvas=()=>{document.body.contains(e)&&(t.values.rect=n.canvas.getBoundingClientRect(),n.canvas.width=n.canvasBox.clientWidth,n.canvas.height=n.canvasBox.clientHeight)},t.functions.startPosition=a=>{n["container-controls"].style.display="none",t.values.painting=!0,t.functions.draw(a),a.type.startsWith("touch")&&a.preventDefault()},t.functions.endPosition=s=>{if(t.values.painting){n["container-controls"].style.display="";let _=t.functions.copyCanvas(n.canvas),i=t.values.canvas.array.findIndex(a=>a==t.values.canvas.focus);t.values.canvas.array=t.values.canvas.array.slice(0,i+1),t.values.canvas.array.push(_),t.values.canvas.focus=_,t.functions.rewriteCanvas(n["img-canvas"],n.canvas,t.values.canvas.array),$.clearRect(0,0,n.canvas.width,n.canvas.height),n.undoButton.style.display="",n.nextButton.style.display="none",n["select-number"].innerHTML=t.values.canvas.array.map((a,t,e)=>{let n=0==t?`<option value="-">0/${e.length}</option> `:"";return`
            ${n}
            <option value="${t}">${t+1}/${e.length}</option>
          `}).join(""),n["select-number"].selectedIndex=t.values.canvas.array.length,a?.events?.drawn&&e.dispatchEvent(new CustomEvent("_drawn",{detail:{canvas:()=>n["img-canvas"]}})),t.values.painting=!1,$.beginPath(),s.type.startsWith("touch")&&s.preventDefault()}},t.functions.draw=s=>{if(!t.values.painting)return;$.strokeStyle=n.color.value,$.lineWidth=n.range.value,$.lineCap="round",$.lineJoin="round";let _,i;if(s.type.startsWith("touch")){let l=s.touches[0]||s.changedTouches[0],v=t.values.rect;_=l.clientX-n.canvas.offsetLeft-v.left,i=l.clientY-n.canvas.offsetTop-v.top,s.preventDefault()}else _=s.offsetX,i=s.offsetY;$.lineTo(_,i),$.stroke(),$.beginPath(),$.moveTo(_,i),a?.events?.drawing&&t.values.paintingReady&&e.dispatchEvent(new CustomEvent("_drawing",{detail:{canvas:()=>(t.functions.rewriteCanvas(t.elements.canvas,n.canvas,[n["img-canvas"],n.canvas]),t.elements.canvas)}}))},t.functions.undoLastPath=()=>{let s=t.values.canvas.array.findIndex(a=>a==t.values.canvas.focus);n.nextButton.style.display="",-1!=s&&(0==s&&(n.undoButton.style.display="none"),t.values.canvas.focus=t.values.canvas.array[s-1],$.clearRect(0,0,n.canvas.width,n.canvas.height),t.functions.rewriteCanvas(n["img-canvas"],n.canvas,t.values.canvas.array.slice(0,s)),n["select-number"].selectedIndex=s,a?.events?.change&&e.dispatchEvent(new CustomEvent("_change",{detail:{canvas:()=>n["img-canvas"]}})))},t.functions.undoNextPath=()=>{let $=t.values.canvas.array.findIndex(a=>a==t.values.canvas.focus);n.undoButton.style.display="",$+2>=t.values.canvas.array.length&&(n.nextButton.style.display="none"),t.values.canvas.focus=t.values.canvas.array[Math.min($+1,t.values.canvas.array.length-1)],t.functions.rewriteCanvas(n["img-canvas"],n.canvas,t.values.canvas.array.slice(0,$+2)),n["select-number"].selectedIndex=Math.min(t.values.canvas.array.length,$+2),a?.events?.change&&e.dispatchEvent(new CustomEvent("_change",{detail:{canvas:()=>n["img-canvas"]}}))},t.functions.clearCanvas=()=>{confirm("\xbfBorrar todo?")&&($.clearRect(0,0,n.canvas.width,n.canvas.height),t.values.canvas.array=[],paths=[],t.values.canvas.focus=null,n["select-number"].innerHTML="<option>0/0</option>",t.functions.rewriteCanvas(n["img-canvas"],n.canvas,[]),n["button-capas"].dispatchEvent(new CustomEvent("click")),a?.events?.change&&e.dispatchEvent(new CustomEvent("_change",{detail:{canvas:()=>n["img-canvas"]}})))},n.canvas.addEventListener("mousedown",t.functions.startPosition),n.canvas.addEventListener("mouseup",t.functions.endPosition),n.canvas.addEventListener("mouseleave",t.functions.endPosition),n.canvas.addEventListener("mousemove",t.functions.draw),n.canvas.addEventListener("touchstart",t.functions.startPosition,{passive:!1}),n.canvas.addEventListener("touchend",t.functions.endPosition,{passive:!1}),n.canvas.addEventListener("touchcancel",t.functions.endPosition,{passive:!1}),n.canvas.addEventListener("touchmove",t.functions.draw,{passive:!1}),n.undoButton.addEventListener("click",t.functions.undoLastPath),n.nextButton.addEventListener("click",t.functions.undoNextPath),n.clearButton.addEventListener("click",t.functions.clearCanvas),n["select-number"].addEventListener("change",()=>{t.values.canvas.focus=t.values.canvas.array[parseInt(n["select-number"].value)],t.functions.rewriteCanvas(n["img-canvas"],n.canvas,t.values.canvas.array.slice(0,parseInt(n["select-number"].value)+1));let $=n["select-number"].selectedIndex;n.undoButton.style.display=0==$?"none":"",n.nextButton.style.display=$==t.values.canvas.array.length?"none":"",a?.events?.change&&e.dispatchEvent(new CustomEvent("_change",{detail:{canvas:()=>n["img-canvas"]}}))}),n["div-window-capas"]?.addEventListener("click",a=>{(a.target===a.currentTarget||a.target.closest("[data-hide-window]"))&&a.currentTarget.hidePopover()}),n["button-capas"].addEventListener("click",()=>{let a=t.values.canvas.array;n["div-window-capas"].showPopover(),n["div-list-capas"].innerHTML="",n["div-button-capas"].style.display=a.length?"flex":"none",n["div-list-capas"].append(...a.map((a,t)=>{let e=createNodeElement(`<div class="div_416usus802fqarxzzxp2" data-capa-index="${t}"><div class="img_p8g7bed9c3iqtbqsd4ig"><canvas></canvas></div><div class="div_uk3zuf6p0b3w7d34rprc"><button data-action="up"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-svg-name="fi fi-rr-angle-small-up"><path d="M18,15.5a1,1,0,0,1-.71-.29l-4.58-4.59a1,1,0,0,0-1.42,0L6.71,15.21a1,1,0,0,1-1.42-1.42L9.88,9.21a3.06,3.06,0,0,1,4.24,0l4.59,4.58a1,1,0,0,1,0,1.42A1,1,0,0,1,18,15.5Z"></path></svg></button><button data-action="down"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-svg-name="fi fi-rr-angle-small-down"><path d="M18.71,8.21a1,1,0,0,0-1.42,0l-4.58,4.58a1,1,0,0,1-1.42,0L6.71,8.21a1,1,0,0,0-1.42,0,1,1,0,0,0,0,1.41l4.59,4.59a3,3,0,0,0,4.24,0l4.59-4.59A1,1,0,0,0,18.71,8.21Z"></path></svg></button><button data-action="delete"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" data-svg-name="fi fi-rr-trash"><path d="M21,4H17.9A5.009,5.009,0,0,0,13,0H11A5.009,5.009,0,0,0,6.1,4H3A1,1,0,0,0,3,6H4V19a5.006,5.006,0,0,0,5,5h6a5.006,5.006,0,0,0,5-5V6h1a1,1,0,0,0,0-2ZM11,2h2a3.006,3.006,0,0,1,2.829,2H8.171A3.006,3.006,0,0,1,11,2Zm7,17a3,3,0,0,1-3,3H9a3,3,0,0,1-3-3V6H18Z"></path><path d="M10,18a1,1,0,0,0,1-1V11a1,1,0,0,0-2,0v6A1,1,0,0,0,10,18Z"></path><path d="M14,18a1,1,0,0,0,1-1V11a1,1,0,0,0-2,0v6A1,1,0,0,0,14,18Z"></path></svg></button></div></div>`);return e.querySelector("canvas").replaceWith(a),e}))}),n.color.addEventListener("change",a=>{a.target.closest("label").style.background=a.target.value}),n["button-toggle-bar"].addEventListener("click",()=>{n["container-controls-bar"].classList.toggle("toggle")}),n["div-list-capas"].addEventListener("click",$=>{let s=$.target.closest("button");if(s){let _=$.target.closest("[data-capa-index]"),i=s.getAttribute("data-action");if("delete"==i&&confirm("\xbfEliminar esta capa?")&&(_.remove(),t.values.canvas.array=t.values.canvas.array.filter((a,t)=>t!=parseInt(_.getAttribute("data-capa-index"))),t.functions.rewriteCanvas(n["img-canvas"],n.canvas,t.values.canvas.array)),"up"==i){let l=parseInt(_.getAttribute("data-capa-index")),v=l-1,c=t.values.canvas.array;if(0==l)c.push(c.shift());else{let o=c[l],d=c[v];c[l]=d,c[v]=o}t.functions.rewriteCanvas(n["img-canvas"],n.canvas,t.values.canvas.array),n["button-capas"].dispatchEvent(new CustomEvent("click"))}if("down"==i){let r=parseInt(_.getAttribute("data-capa-index")),u=r+1,g=t.values.canvas.array;if(r==g.length-1)g.unshift(g.pop());else{let p=g[r],h=g[u];g[r]=h,g[u]=p}t.functions.rewriteCanvas(n["img-canvas"],n.canvas,t.values.canvas.array),n["button-capas"].dispatchEvent(new CustomEvent("click"))}n["select-number"].innerHTML=t.values.canvas.array.map((a,t,e)=>{let n=0==t?`<option value="-">0/${e.length}</option> `:"";return`
            ${n} 
            <option value="${t}">${t+1}/${e.length}</option>
          `}).join(""),n["select-number"].selectedIndex=t.values.canvas.array.length,[t.values.canvas.focus]=t.values.canvas.array.slice(-1),a?.events?.change&&e.dispatchEvent(new CustomEvent("_change",{detail:{canvas:()=>n["img-canvas"]}}))}}),n["button-download"].addEventListener("click",()=>{let a=n["img-canvas"].toDataURL("image/png"),t=document.createElement("a");t.href=a,t.download=`canvas-${Date.now()}.png`,t.click()}),setTimeout(t.functions.resizeCanvas),addEventListener("resize",t.functions.resizeCanvas),e};