export default(function(t){return t.MyArray=class{static range(t,e){void 0===e&&(e=t,t=0);let r=[];for(let i=t;i<=e;i++)r.push(i);return r}static search(t,e){if("function"==typeof e)for(let r=0;r<t.length;r++){let i=e(t[r],r,t);if(i)return[t[r],r,i]}return[null,-1,null]}static copy(t){return[...t]}static shuffle(t){let e=[...t],r=[];for(;e.length;){let i=Math.floor(Math.random()*e.length);r.push(...e.splice(i,1))}return r}static array(t){return Array.isArray(t)||t&&"function"==typeof t[Symbol.iterator]?Array.from(t):[]}static newArray(t,e,r=!0){let i=[];for(let n=0;n<t.length;n++){let a=e(t[n],n,t);(r||a)&&i.push(a)}return i}static changeIndex(t,e,r){if(e>=0&&e<t.length&&r>=0&&r<t.length){let i=t[e];t[e]=t[r],t[r]=i}}},t.MyInt=class{static rand(...t){let[e,r=0]=t.reverse();return Math.floor(Math.random()*(e+1-r)+r)}static find(t,e=1/0){return"string"==typeof t?t.slice(0,e).split("").map(t=>isNaN(parseInt(t))?"|":t).join("").split("|").filter(t=>parseInt(t)).map(t=>parseInt(t)):[]}static percentage(t,e){return parseFloat(t)/parseFloat(e)*100}},t.MyString=class{static{this._input=document.createElement("input")}static trim(t){return{left(e=""){if(""!=t&&""!=e)for(;t.startsWith(e);)t=t.slice(1);return t},right(e=""){if(""!=t&&""!=e)for(;t.endsWith(e);)t=t.slice(0,-1);return t},both(e=""){if(""!=t&&""!=e){for(;t.startsWith(e);)t=t.slice(1);for(;t.endsWith(e);)t=t.slice(0,-1)}return t}}}static encode(t){return{toInput:()=>(this._input.setAttribute("value",t),this._input.outerHTML.slice(14,-2)),toTextarea(){let e=document.createElement("textarea");return e.innerHTML=t,e.innerHTML}}}static uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){let e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},t.MyElement=class{static create(t){let e=document.createElement("div");return e.innerHTML=t,{one(t){let r=e.children[0]||"";return e.innerHTML="",t?.(r),r},all(t){let r=[...e.children];return e.innerHTML="",t?.(r),r},fragment(t){let r=document.createDocumentFragment();return r.append(...e.children),t?.(r),r}}}static event(t,e,r=null,i={}){return t.addEventListener(e,r,i),()=>t.removeEventListener(e,r,i)}static replaceChildren(t,e={}){let r=t=>t instanceof Text||t instanceof String||t instanceof Element||t instanceof HTMLElement||t instanceof DocumentFragment||"string"==typeof render;return r(t)&&("function"==typeof e&&(e=e(t)),Object.entries(e??{}).forEach(e=>{let i=t.querySelector(e[0]);i&&(i.replaceWith(e[1]),r(e[1])&&Array.from(i.attributes).forEach(t=>{e[1].setAttribute?.(t.name,`${e[1].getAttribute(t.name)||""} ${t.value}`.trim())}))})),t}static objectChildren(t,e,r=!1){return Array.from(t).reduce((t,i)=>(t[i.getAttribute(e)]=i,r&&i.removeAttribute(e),t),{})}static style(t,e={}){try{return Object.keys(e??{}).forEach(r=>t.style[r]=e[r]),t}catch(r){return t}}},t.MyColor=class{static toRgb(e={}){if(e?.hex){let r=e.hex;3===(r=(r=r.replace(/^#/,"")).slice(0,6)).length&&(r=r.split("").map(t=>t+t).join(""));let i=parseInt(r,16),n=i>>16&255,a=i>>8&255,s=255&i;return{string:`rgb(${n}, ${a}, ${s})`,array:[n,a,s]}}if(e?.color){let l=t.MyColor.toHex({color:e.color});return t.MyColor.toRgb({hex:l})}return{string:"",rgb:[]}}static toHex(t={}){if(t?.rgb){let[e=0,r=0,i=0]=Array.isArray(t.rgb)?t.rgb:[];return`#${(16777216|e<<16|r<<8|i).toString(16).slice(1).toUpperCase()}`}if(t?.color){let n=document.createElement("canvas").getContext("2d");return n.fillStyle=t.color,n.fillStyle.toUpperCase()}return""}static toDark(e={},r=20){if(e?.hex){let i=t.MyColor.toRgb({hex:e.hex});return t.MyColor.toDark({rgb:i.array},r)}if(e?.color){let n=t.MyColor.toRgb({color:e.color});return t.MyColor.toDark({rgb:n.array},r)}if(e?.rgb){let[a=0,s=0,l=0]=Array.isArray(e.rgb)?e.rgb:[];return a=Math.max(0,a-r),s=Math.max(0,s-r),l=Math.max(0,l-r),t.MyColor.toHex({rgb:[a,s,l]})}return""}},t.MyImage=class{static async canvas(t){return new Promise((e,r)=>{let i=new Image;i.onload=function(){let r=document.createElement("canvas"),n=r.getContext("2d");r.width=i.width,r.height=i.height,n.drawImage(i,0,0),e({canvas:r,ctx:n,url:t})},i.onerror=r,i.crossOrigin="Anonymous",i.src=t})}static async resize(t,e){return new Promise((r,i)=>{if(!Array.isArray(e))return i({status:!1,images:[]});let n=new Image;n.addEventListener("load",()=>{let t=e.map(t=>{let e=document.createElement("canvas"),r=e.getContext("2d"),i=t.both??t.width,a=t.both??t.height;e.width=i,e.height=a;let s=n.width/n.height,l=i/a,c,o,h,u;return s>l?(c=n.height*l,o=n.height,h=(n.width-c)/2,u=0):(c=n.width,o=n.width/l,h=0,u=(n.height-o)/2),r.drawImage(n,h,u,c,o,0,0,i,a),{width:i,height:a,canvas:e}});r({status:!0,images:t})}),n.addEventListener("error",()=>{i({status:!1,images:[]})}),n.crossOrigin="Anonymous",n.src=t})}static aspectRatio(t,e){let{width:r,height:i}=t,{width:n,height:a}=e;return n&&a||n?{width:n,height:i*(n/r)}:a?{width:r*(a/i),height:a}:{width:r,height:i}}},t.RouteHashCallback=class{constructor(){this._params={},this._set=[]}__hash=t=>{let e=t.split("/").filter(t=>t);return e[0]="#",e};get=()=>{this._params={};let t=this.__hash(location.hash||"#/"),e=this._set.find(e=>{if(-1!=e.all)return(location.hash||"#/").startsWith(e.hash.arrayString.slice(0,e.all).join("/"));if(e.hash.arrayObject.length==t.length){let r=t.every((t,r)=>e.hash.arrayObject[r].status?(this._params[e.hash.arrayObject[r].name]=t,!0):t===e.hash.arrayObject[r].name);return r}return!1});return e&&"function"==typeof e.callback?e.callback(this._params):null};set=t=>{this._set=t.map(t=>{let e=this.__hash(`#/${t.hash}`),r=-1;return{hash:{arrayObject:e.map((t,e)=>(-1==r&&"*"==t&&(r=e),{status:t.startsWith(":"),name:t.startsWith(":")?t.slice(1):t})),arrayString:e},callback:t.callback,all:r}})};params=(t=null)=>"string"==typeof t?this._params[t]:JSON.parse(JSON.stringify(this._params))},t.RenderObjectElement=class{constructor(t={},e="replace"){this._mode=e,this.savedElement=Object.keys(t).reduce((e,r)=>(e[r]={element:t[r],elementText:document.createTextNode(""),parent:t[r].parentElement,status:!0},e),{})}set(t,e=null){"replace"==(e=e||this._mode)&&Object.keys(t).forEach(e=>{let r=this.savedElement[e];r&&(r.status=t[e],r.status?r.element.parentElement||r.elementText.replaceWith(r.element):r.element.parentElement&&r.element.replaceWith(r.elementText))}),"display"==e&&Object.entries(t).forEach(t=>{this.savedElement[t[0]]&&(this.savedElement[t[0]].element.style.display=t[1]?"":"none")})}},t.Cookie=class{static set(t,e,r={}){let{lifetime:i=0,path:n="/",domain:a="",samesite:s="Lax"}=r,l="";if(i){let c=new Date;c.setTime(c.getTime()+1e3*i),l="; expires="+c.toUTCString()}document.cookie=`${t}=${encodeURIComponent(e||"")}${l}; path=${n}; domain=${a}; samesite=${s}`}static get(t=""){let e=document.cookie.split("; ");if(""===t)return e.reduce((t,e)=>{let[r,i]=e.split("=");return t[r]=decodeURIComponent(i),t},{});{let r=e.find(e=>e.startsWith(t+"="));return r?decodeURIComponent(r.split("=")[1]):null}}static remove(t,e){let{path:r="/",domain:i=""}=e;document.cookie=`${t}=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=${r}; domain=${i};`}},t.EncodeTemplateString=class{static{this._input=document.createElement("input")}static toInput=(t="")=>(this._input.setAttribute("value",t),this._input.outerHTML.slice(14,-2));static toTextarea=(t="")=>{let e=document.createElement("textarea");return e.innerHTML=t,e.innerHTML}},t.TrimString=class{static left=(t="",e="")=>{if(""!=t&&""!=e)for(;t.startsWith(e);)t=t.slice(1);return t};static right=(t="",e="")=>{if(""!=t&&""!=e)for(;t.endsWith(e);)t=t.slice(0,-1);return t};static both=(t="",e="")=>{if(""!=t&&""!=e){for(;t.startsWith(e);)t=t.slice(1);for(;t.endsWith(e);)t=t.slice(0,-1)}return t}},t.StorageSave=class{static single=(t,e,r,i=null)=>{var n;return t.getItem(e)||t.setItem(e,i instanceof Object?JSON.stringify(i):i),t.setItem(e,(n=r(t.getItem(e)))instanceof Object?JSON.stringify(n):n),t.getItem(e)};static group=(t,e,r=!0)=>Object.entries(e).reduce((e,i)=>{let n=r||!t.getItem(i[0]);return n&&t.setItem(i[0],i[1]instanceof Object?JSON.stringify(i[1]):i[1]),e[i[0]]=n,e},{})},t})({});